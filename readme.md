# Deployment
Create env.conf file using env.example as pattern then run
```sh
sh deploy.sh
```

In order to edit frontend files run following commands
```sh
mv /path/to/project/frontend/
npm i
$(npm bin)/gulp watch
```
# Commands
**Scrape hotels**
```sh
python manage.py scrape_hotels
```
Description
This command gets hotels urls from DB, (ordered by hotel_pk), visit these urls, parse responses and saved parsed results as JSON file inside /path/to/project/data/hotels.
Parameters
- --page-size
number of hotels to be stored in one file, default value is 100.
- --start-page
Start position to scrape, default value is 1
- --end-page
End position to scrape, if this parameter wasn't provided, scrape all hotels.

Example 
```sh
python manage.py scrape_hotels --start-page=1 --end-page=1000 --page-size=100
```

**Update hotels**
```sh
python manage.py update_hotels
```
Description
Update hotels from data generated by scrape_hotels command.


**Generate sitemaps**
```sh
python manage.py generate_sitemaps
```
Description
Create sitemap index file and gziped sitemaps for the site, all files stored inside /path/to/project/data/sitemaps/ folder.
There are two patterns
- https://hotel.mobytrip.com/{{location}}--{{country_code}}&amp;dest_id={{dest_id}}&amp;dest_type={{dest_type}}
- https://hotel.mobytrip.com/hotel?hotel_id={{hotel_id}}

Data for the first pattern must be provided using /path/to/project/data/locations.tsv file.

Comment
According to Google guides, the default size of urls inside one sitemap file must not exceed 50000. That's why sitemap index file is used.

